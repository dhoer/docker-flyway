sudo: required

language: ruby

services:
  - docker

env:
  - COMPOSE_PROJECT_NAME=mysql5 COMPOSE_FILE=docker-compose.mysql5.yml
  - COMPOSE_PROJECT_NAME=mysql8 COMPOSE_FILE=docker-compose.mysql8.yml

before_script:
  - docker-compose up -d db
  - sleep 30

script:
  - docker-compose build
  - docker-compose up flyway
  - docker-compose up flyway-alpine

after_script:
  - docker-compose down
